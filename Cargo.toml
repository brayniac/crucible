[workspace]
resolver = "2"

members = [
	# Cache Implementations and Core
	"cache/core",
	"cache/segcache",
	"cache/s3fifo",

	# IO Driver and Transport
	"io/grpc",
	"io/http2",
	"io/driver",

	# Protocol Implementations
	"protocol/momento",
	"protocol/ping",
	"protocol/resp",
	"protocol/memcache",

	# Server
	"server",

	# Benchmark Tool
	"benchmark",

	# Development Tasks
	"xtask",

	# Experiment Driver
	"crates/bakeoff",
]

[workspace.package]
authors = ["Brian Martin <brayniac@gmail.com>"]
edition = "2024"
license = "MIT OR Apache-2.0"
repository = "https://github.com/brayniac/crucible"

[workspace.dependencies]
# Shared dependencies across workspace
ahash = "0.8"
bytes = "1.10"
clap = "4"
clocksource = "0.8"
crossbeam-channel = "0.5"
crossbeam-deque = "0.8"
http-body-util = "0.1"
hyper = "1"
hyper-util = "0.1"
itoa = "1.0"
libc = "0.2"
loom = "0.7"
memchr = "2.7"
memmap2 = "0.9"
metriken = "0.7"
mio = "1"
num_cpus = "1.16"
parking_lot = "0.12"
rand = "0.9"
rustls = { version = "0.23", default-features = false }
ryu = "1.0"
serde = "1"
slab = "0.4"
socket2 = "0.5"
thiserror = "2"
tokio = "1"
toml = "0.8"
webpki-roots = "0.26"
tracing = "0.1"

# Internal crates
io-driver = { path = "io/driver" }
http2 = { path = "io/http2" }
grpc = { path = "io/grpc" }
protocol-momento = { path = "protocol/momento" }
protocol-ping = { path = "protocol/ping" }
protocol-resp = { path = "protocol/resp" }
protocol-memcache = { path = "protocol/memcache" }
cache-core = { path = "cache/core" }
segcache = { path = "cache/segcache" }
s3fifo = { path = "cache/s3fifo" }

# Platform-specific (Linux io_uring)
io-uring = "0.7"

[profile.release]
lto = true
codegen-units = 1
panic = "abort"
debug = true
