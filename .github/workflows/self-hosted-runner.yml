name: Self-Hosted Runner Test

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: self-hosted
    steps:
      - name: System info
        run: |
          echo "Runner: $(hostname)"
          uname -a
          nproc
          free -h

      - name: Check Rust toolchain
        run: |
          source ~/.cargo/env
          rustc --version
          cargo --version
          rustup show

      - name: Check cargo-fuzz
        run: |
          source ~/.cargo/env
          cargo fuzz --version

      - name: Check nightly
        run: |
          source ~/.cargo/env
          rustup run nightly rustc --version
