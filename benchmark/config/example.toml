[general]
duration = "60s"
warmup = "10s"
threads = 1

[target]
endpoints = ["127.0.0.1:6379"]
protocol = "resp"

[connection]
pool_size = 4
pipeline_depth = 32
connect_timeout = "5s"
request_timeout = "1s"

[workload]
# prefill = true       # Write each key once before test starts
# rate_limit = 100000  # Uncomment to limit rate

[workload.keyspace]
length = 16
count = 1000000
distribution = "uniform"

[workload.commands]
get = 80
set = 20

[workload.values]
length = 64

[timestamps]
enabled = true
mode = "userspace"  # or "software" for SO_TIMESTAMPING (Linux only)

[admin]
# listen = "127.0.0.1:9090"  # Prometheus metrics endpoint
# parquet = "metrics.parquet"  # Write metrics to parquet file at end of run
# parquet_interval = "1s"  # Snapshot interval for parquet recording

# Saturation search: automatically find max throughput that meets SLO
# Uncomment to enable saturation search mode
# [workload.saturation_search]
# slo = { p999 = "1ms" }  # Latency SLO thresholds (any of: p50, p99, p999)
# start_rate = 1000       # Starting request rate (req/s)
# step_multiplier = 1.05  # Increase rate by 5% each step
# sample_window = "5s"    # Duration to sample at each rate level
# stop_after_failures = 3 # Stop after N consecutive SLO violations
# max_rate = 100000000    # Absolute maximum rate to try
# min_throughput_ratio = 0.9  # Fail step if achieved < 90% of target
